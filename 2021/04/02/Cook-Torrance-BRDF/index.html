<!DOCTYPE html>
<html lang="en">
    <!-- title -->
<!-- keywords -->
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="author" content="Yan Zhang">
    <meta name="renderer" content="webkit">
    <meta name="copyright" content="Yan Zhang">
        <meta name="keywords" content="hexo,hexo-theme,hexo-blog">
    <meta name="description" content="">
    <meta name="description" content="Cook-Torrance BRDF的定义:首先让我们先看看如何计算出。 3.1 漫反射项推导在很久之前谈光栅化的时候就提及过，漫反射会均匀的向每个方向反射因此，漫反射的BRDF一定是一个常数。假设入射光是均匀且遍布整个半球方向，可以得到如下方程：（根据定义， 积分过程省略） 由于假设入射光是均匀且遍布整个半球方向，所以与方向无关，且等于，最终约去两边，得到结果：但有一点要注意的是，这里并没有考虑">
<meta property="og:type" content="article">
<meta property="og:title" content="Cook-Torrance的BRDF">
<meta property="og:url" content="https://graphicyan.github.io/2021/04/02/Cook-Torrance-BRDF/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="Cook-Torrance BRDF的定义:首先让我们先看看如何计算出。 3.1 漫反射项推导在很久之前谈光栅化的时候就提及过，漫反射会均匀的向每个方向反射因此，漫反射的BRDF一定是一个常数。假设入射光是均匀且遍布整个半球方向，可以得到如下方程：（根据定义， 积分过程省略） 由于假设入射光是均匀且遍布整个半球方向，所以与方向无关，且等于，最终约去两边，得到结果：但有一点要注意的是，这里并没有考虑">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_000.svg#from=paste&height=44&id=u1f6096cf&margin=%5Bobject%20Object%5D&originHeight=44&originWidth=675&originalType=url&status=done&style=none&taskId=udac5ec80-f6f7-4012-958b-43f395591ff&width=675">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_001.svg#from=paste&height=23&id=u653a67dd&margin=%5Bobject%20Object%5D&originHeight=23&originWidth=63&originalType=url&status=done&style=none&taskId=u5a2d08d2-390d-4bea-a1a4-b06e7339dd0&width=63">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_002.jpg#from=paste&height=383&id=u5a73d9de&margin=%5Bobject%20Object%5D&originHeight=383&originWidth=617&originalType=url&status=done&style=none&taskId=ub9550757-311a-43ba-9a91-98410a7b861&width=617">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_003.jpg#from=paste&height=261&id=u4adb0527&margin=%5Bobject%20Object%5D&originHeight=261&originWidth=840&originalType=url&status=done&style=none&taskId=u3829682d-e5a3-4a9c-ad35-04c08e61745&width=840">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_004.svg#from=paste&height=23&id=uf7abef4b&margin=%5Bobject%20Object%5D&originHeight=23&originWidth=137&originalType=url&status=done&style=none&taskId=u97cac1da-3352-4542-ba99-db307a11830&width=137">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_005.svg#from=paste&height=23&id=u7ffcba90&margin=%5Bobject%20Object%5D&originHeight=23&originWidth=21&originalType=url&status=done&style=none&taskId=ub3c6f941-f93b-4127-b266-6e2e44f669d&width=21">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_006.svg#from=paste&height=23&id=u85e8414b&margin=%5Bobject%20Object%5D&originHeight=23&originWidth=24&originalType=url&status=done&style=none&taskId=uc1baa105-9c17-47e6-a4aa-8f325ebf36c&width=24">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_007.svg#from=paste&height=20&id=uf94ccd9e&margin=%5Bobject%20Object%5D&originHeight=20&originWidth=14&originalType=url&status=done&style=none&taskId=ud7d5515c-625f-4429-a059-5998a307cf4&width=14">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_008.svg#from=paste&height=57&id=u6152c488&margin=%5Bobject%20Object%5D&originHeight=57&originWidth=675&originalType=url&status=done&style=none&taskId=u0e8479cf-65ba-4bd9-a04c-d566cd5c66f&width=675">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_009.svg#from=paste&height=54&id=u00c4a599&margin=%5Bobject%20Object%5D&originHeight=54&originWidth=675&originalType=url&status=done&style=none&taskId=u94796a54-97fe-4089-8652-01cd37b9f2c&width=675">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_010.svg#from=paste&height=20&id=ubaa9c8d7&margin=%5Bobject%20Object%5D&originHeight=20&originWidth=11&originalType=url&status=done&style=none&taskId=u9ed945a7-d18f-440c-88a3-f36e1b9853a&width=11">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_011.svg#from=paste&height=68&id=ub446b41a&margin=%5Bobject%20Object%5D&originHeight=68&originWidth=675&originalType=url&status=done&style=none&taskId=u6f5e5c5b-7b9f-4dcd-8cc9-45382254769&width=675">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_012.svg#from=paste&height=15&id=u19fc8cb3&margin=%5Bobject%20Object%5D&originHeight=15&originWidth=10&originalType=url&status=done&style=none&taskId=u0aa36a34-67d6-46a4-a7a9-546d4da5d02&width=10">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_013.svg#from=paste&height=20&id=u29652c75&margin=%5Bobject%20Object%5D&originHeight=20&originWidth=6&originalType=url&status=done&style=none&taskId=u4d9f2d7f-566b-4b21-9d11-b21e72be70d&width=6">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_014.svg#from=paste&height=15&id=u762f01cf&margin=%5Bobject%20Object%5D&originHeight=15&originWidth=13&originalType=url&status=done&style=none&taskId=uaa5228aa-e424-41e6-b043-69f138bbd63&width=13">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_015.svg#from=paste&height=20&id=u3e9e3193&margin=%5Bobject%20Object%5D&originHeight=20&originWidth=12&originalType=url&status=done&style=none&taskId=ud9fca269-ad25-4084-8bbe-ba147900666&width=12">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_016.svg#from=paste&height=23&id=u82397aba&margin=%5Bobject%20Object%5D&originHeight=23&originWidth=68&originalType=url&status=done&style=none&taskId=ub78efde6-6563-4074-ac62-18a91bb96bd&width=68">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_017.svg#from=paste&height=45&id=u622aee9c&margin=%5Bobject%20Object%5D&originHeight=45&originWidth=675&originalType=url&status=done&style=none&taskId=uc55f9c37-063e-4cd3-9efc-26a77979327&width=675">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_018.svg#from=paste&height=45&id=u1649bbb3&margin=%5Bobject%20Object%5D&originHeight=45&originWidth=675&originalType=url&status=done&style=none&taskId=u58549714-3fc8-44ba-8f6b-e9739521826&width=675">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_019.svg#from=paste&height=20&id=u4e6bcaf3&margin=%5Bobject%20Object%5D&originHeight=20&originWidth=17&originalType=url&status=done&style=none&taskId=uc4d924af-dc8b-46ad-aa92-1183dd25c0d&width=17">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_020.svg#from=paste&height=20&id=ud4180fc2&margin=%5Bobject%20Object%5D&originHeight=20&originWidth=12&originalType=url&status=done&style=none&taskId=u614dabff-8849-44b9-addb-481b3b9662b&width=12">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_021.svg#from=paste&height=20&id=uaa99bc40&margin=%5Bobject%20Object%5D&originHeight=20&originWidth=12&originalType=url&status=done&style=none&taskId=u6d5adb96-6221-4c11-8d5e-d7a3716b99e&width=12">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_022.svg#from=paste&height=20&id=u09b05592&margin=%5Bobject%20Object%5D&originHeight=20&originWidth=12&originalType=url&status=done&style=none&taskId=u744cc614-794f-4ca1-aac0-68039218316&width=12">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_023.svg#from=paste&height=26&id=u896d9440&margin=%5Bobject%20Object%5D&originHeight=26&originWidth=46&originalType=url&status=done&style=none&taskId=u931aee85-a38c-4667-a23d-e39866d99f4&width=46">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_024.svg#from=paste&height=20&id=u8ef475d2&margin=%5Bobject%20Object%5D&originHeight=20&originWidth=12&originalType=url&status=done&style=none&taskId=u1aab23fb-21a2-41a4-ad44-52245f1d2b2&width=12">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_025.svg#from=paste&height=20&id=uc1db05a7&margin=%5Bobject%20Object%5D&originHeight=20&originWidth=12&originalType=url&status=done&style=none&taskId=uea16520e-7b69-40b8-b6fa-34453bf6939&width=12">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_026.svg#from=paste&height=26&id=u8b3bfd46&margin=%5Bobject%20Object%5D&originHeight=26&originWidth=46&originalType=url&status=done&style=none&taskId=ubd93c239-220f-4d3e-ad4c-b297a10bdb5&width=46">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_027.svg#from=paste&height=26&id=u7ae81139&margin=%5Bobject%20Object%5D&originHeight=26&originWidth=46&originalType=url&status=done&style=none&taskId=ud276b49a-2d8f-4f11-8945-c9d8d317d2b&width=46">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_028.svg#from=paste&height=20&id=u86d3351b&margin=%5Bobject%20Object%5D&originHeight=20&originWidth=12&originalType=url&status=done&style=none&taskId=u46d7377b-e25a-4b76-b5b7-d566f7e2836&width=12">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_029.svg#from=paste&height=26&id=u7b903e31&margin=%5Bobject%20Object%5D&originHeight=26&originWidth=46&originalType=url&status=done&style=none&taskId=u0fc18995-ad4f-45b5-a623-6a977092842&width=46">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_030.svg#from=paste&height=20&id=u11b758db&margin=%5Bobject%20Object%5D&originHeight=20&originWidth=12&originalType=url&status=done&style=none&taskId=uf0b8d062-d4a4-48a2-aee4-02ee2ed033e&width=12">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_031.svg#from=paste&height=15&id=u1f1c7a05&margin=%5Bobject%20Object%5D&originHeight=15&originWidth=10&originalType=url&status=done&style=none&taskId=u9e6b3038-a66f-41ac-b4d0-c500e4f780d&width=10">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_032.svg#from=paste&height=20&id=u3446b9be&margin=%5Bobject%20Object%5D&originHeight=20&originWidth=6&originalType=url&status=done&style=none&taskId=u2a8b6a30-efca-46f0-8ea8-7531fde1660&width=6">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_033.svg#from=paste&height=26&id=u360ed13d&margin=%5Bobject%20Object%5D&originHeight=26&originWidth=174&originalType=url&status=done&style=none&taskId=u67f6bdaa-3232-4dec-8c15-7edefd681a3&width=174">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_034.jpeg#from=paste&height=203&id=ucbf0b9a9&margin=%5Bobject%20Object%5D&originHeight=203&originWidth=915&originalType=url&status=done&style=none&taskId=u7040579b-cc69-4e8f-ae68-0f366dd5432&width=915">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_035.svg#from=paste&height=26&id=u576e6896&margin=%5Bobject%20Object%5D&originHeight=26&originWidth=46&originalType=url&status=done&style=none&taskId=u3f0dc219-ef89-4867-833d-e372ba86aa0&width=46">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_036.svg#from=paste&height=26&id=u02ac6fad&margin=%5Bobject%20Object%5D&originHeight=26&originWidth=223&originalType=url&status=done&style=none&taskId=u6ad41389-ead5-4144-9ac6-799ebf80f70&width=223">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_037.svg#from=paste&height=18&id=u5f1f6bf9&margin=%5Bobject%20Object%5D&originHeight=18&originWidth=20&originalType=url&status=done&style=none&taskId=ue6a68a5c-3c87-401f-b1c4-646e09c78d8&width=20">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_038.svg#from=paste&height=20&id=uf2219594&margin=%5Bobject%20Object%5D&originHeight=20&originWidth=6&originalType=url&status=done&style=none&taskId=ua294b6ee-a741-4c13-9de7-91f5923d83b&width=6">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_039.svg#from=paste&height=18&id=u223b1d12&margin=%5Bobject%20Object%5D&originHeight=18&originWidth=22&originalType=url&status=done&style=none&taskId=u17976c48-1932-4046-b592-e85592500fd&width=22">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_040.svg#from=paste&height=15&id=uec90143f&margin=%5Bobject%20Object%5D&originHeight=15&originWidth=10&originalType=url&status=done&style=none&taskId=u863661e4-ba3c-44c8-a97c-fe470fa67df&width=10">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_041.svg#from=paste&height=18&id=u64fb4020&margin=%5Bobject%20Object%5D&originHeight=18&originWidth=24&originalType=url&status=done&style=none&taskId=uc6e34ddb-9972-4e98-a27f-cf8c68f5996&width=24">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_042.svg#from=paste&height=20&id=u952cdf9b&margin=%5Bobject%20Object%5D&originHeight=20&originWidth=12&originalType=url&status=done&style=none&taskId=uac7e9f03-58ce-47fa-a6df-2433094fb0e&width=12">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_043.svg#from=paste&height=95&id=u2be57d99&margin=%5Bobject%20Object%5D&originHeight=95&originWidth=675&originalType=url&status=done&style=none&taskId=ufaf458e7-9785-4cf4-96b0-d48a15cd0af&width=675">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_044.svg#from=paste&height=29&id=u73444e2d&margin=%5Bobject%20Object%5D&originHeight=29&originWidth=80&originalType=url&status=done&style=none&taskId=u228ac38d-bdf5-4a02-b33e-8ea905c60b2&width=80">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_045.svg#from=paste&height=26&id=u9197e6e0&margin=%5Bobject%20Object%5D&originHeight=26&originWidth=67&originalType=url&status=done&style=none&taskId=ub0fa703e-3fba-4b7c-8336-dbfce52d3f0&width=67">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_046.svg#from=paste&height=23&id=ud279c92d&margin=%5Bobject%20Object%5D&originHeight=23&originWidth=20&originalType=url&status=done&style=none&taskId=u0de0326f-d16b-4917-85b6-4da189d890b&width=20">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_047.svg#from=paste&height=18&id=u32cb97f7&margin=%5Bobject%20Object%5D&originHeight=18&originWidth=20&originalType=url&status=done&style=none&taskId=ub813f240-8934-4846-8257-d14ddfddb1e&width=20">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_048.svg#from=paste&height=18&id=ub334ea57&margin=%5Bobject%20Object%5D&originHeight=18&originWidth=24&originalType=url&status=done&style=none&taskId=u1e910778-b1c7-4d93-be20-78f0c36c8e5&width=24">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_049.svg#from=paste&height=44&id=ufcf3f559&margin=%5Bobject%20Object%5D&originHeight=44&originWidth=675&originalType=url&status=done&style=none&taskId=u8e073820-5875-4b29-bf9e-70d855ac98d&width=675">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_050.svg#from=paste&height=65&id=u43a35287&margin=%5Bobject%20Object%5D&originHeight=65&originWidth=675&originalType=url&status=done&style=none&taskId=u38580368-deed-4a86-a919-b960985232b&width=675">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_051.svg#from=paste&height=68&id=uf0155597&margin=%5Bobject%20Object%5D&originHeight=68&originWidth=675&originalType=url&status=done&style=none&taskId=uef11399e-9d45-492d-ab8b-61174f81d74&width=675">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_052.svg#from=paste&height=23&id=u5adbd982&margin=%5Bobject%20Object%5D&originHeight=23&originWidth=17&originalType=url&status=done&style=none&taskId=u7f874af5-0e7f-4570-9abe-c69088e4e73&width=17">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_053.svg#from=paste&height=18&id=ubada6e0b&margin=%5Bobject%20Object%5D&originHeight=18&originWidth=20&originalType=url&status=done&style=none&taskId=u57dc33f7-f09f-4200-869f-1c083d8f442&width=20">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_054.svg#from=paste&height=15&id=ubf46313f&margin=%5Bobject%20Object%5D&originHeight=15&originWidth=13&originalType=url&status=done&style=none&taskId=u9e4d59b5-f631-4960-9920-2b105e9ee73&width=13">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_055.svg#from=paste&height=23&id=u59ee9ec2&margin=%5Bobject%20Object%5D&originHeight=23&originWidth=19&originalType=url&status=done&style=none&taskId=u8401fdf5-1ced-469c-9da9-227650336a7&width=19">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_056.svg#from=paste&height=18&id=ue668bdcc&margin=%5Bobject%20Object%5D&originHeight=18&originWidth=22&originalType=url&status=done&style=none&taskId=uf4baaa26-ad93-4631-9da5-4f5ade189d9&width=22">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_057.svg#from=paste&height=15&id=uc1ca41a3&margin=%5Bobject%20Object%5D&originHeight=15&originWidth=13&originalType=url&status=done&style=none&taskId=ub49734a3-7497-4017-a29b-a193030e95a&width=13">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_058.svg#from=paste&height=23&id=u41c5adf2&margin=%5Bobject%20Object%5D&originHeight=23&originWidth=20&originalType=url&status=done&style=none&taskId=ua9a6c0f0-1331-4f88-aea6-0f549bf0964&width=20">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_059.svg#from=paste&height=18&id=u17bccd56&margin=%5Bobject%20Object%5D&originHeight=18&originWidth=20&originalType=url&status=done&style=none&taskId=u446e7c40-8a0a-4546-a6e7-eaccd3825e6&width=20">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_060.svg#from=paste&height=18&id=ua0ca7b84&margin=%5Bobject%20Object%5D&originHeight=18&originWidth=24&originalType=url&status=done&style=none&taskId=ubfb37115-e132-4906-9da3-b67bbad760e&width=24">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_061.svg#from=paste&height=26&id=u96ebdf3e&margin=%5Bobject%20Object%5D&originHeight=26&originWidth=78&originalType=url&status=done&style=none&taskId=u46c12d46-5127-4faa-9bb3-ad3db631412&width=78">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_062.svg#from=paste&height=26&id=u4593518c&margin=%5Bobject%20Object%5D&originHeight=26&originWidth=78&originalType=url&status=done&style=none&taskId=u955a3c77-af7b-4696-8e52-5cb00cb684a&width=78">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_063.jpeg#from=paste&height=434&id=u8b311ac9&margin=%5Bobject%20Object%5D&originHeight=434&originWidth=768&originalType=url&status=done&style=none&taskId=ub29ff17b-6e03-4eb3-a521-cd4c123e32f&width=768">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_064.svg#from=paste&height=18&id=ucfde2fc1&margin=%5Bobject%20Object%5D&originHeight=18&originWidth=20&originalType=url&status=done&style=none&taskId=u48ecb6dd-0222-4b93-a119-5a060a3890f&width=20">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_065.svg#from=paste&height=23&id=u3f469000&margin=%5Bobject%20Object%5D&originHeight=23&originWidth=35&originalType=url&status=done&style=none&taskId=u87e24a62-422c-4655-a85d-53429855b63&width=35">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_066.svg#from=paste&height=23&id=uedd1ed36&margin=%5Bobject%20Object%5D&originHeight=23&originWidth=33&originalType=url&status=done&style=none&taskId=u13d58571-361c-4fb4-8a88-2a52ba24201&width=33">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_067.svg#from=paste&height=23&id=u4d5596dd&margin=%5Bobject%20Object%5D&originHeight=23&originWidth=35&originalType=url&status=done&style=none&taskId=ubc10c9c9-0faf-4b94-a80a-e5f4c394d58&width=35">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_068.svg#from=paste&height=18&id=u1a5e69f2&margin=%5Bobject%20Object%5D&originHeight=18&originWidth=20&originalType=url&status=done&style=none&taskId=u2cb5570f-0039-478c-8e46-2e771a736a9&width=20">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_069.svg#from=paste&height=15&id=u7288bf11&margin=%5Bobject%20Object%5D&originHeight=15&originWidth=10&originalType=url&status=done&style=none&taskId=ud7ff3d50-98e2-468c-afb8-a6149cdbad9&width=10">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_070.jpeg#from=paste&height=694&id=ud2c8ebab&margin=%5Bobject%20Object%5D&originHeight=694&originWidth=717&originalType=url&status=done&style=none&taskId=u87d8b61f-3f96-4026-9dfc-50bf129586a&width=717">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_071.svg#from=paste&height=18&id=u82618f4e&margin=%5Bobject%20Object%5D&originHeight=18&originWidth=24&originalType=url&status=done&style=none&taskId=u20872285-7e87-4b87-a8ef-2e3d780ee90&width=24">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_072.svg#from=paste&height=23&id=ub64989d5&margin=%5Bobject%20Object%5D&originHeight=23&originWidth=20&originalType=url&status=done&style=none&taskId=u429d7204-00d1-4f4d-b7a3-dd84c0bd8d9&width=20">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_073.svg#from=paste&height=23&id=u8bd5d5ba&margin=%5Bobject%20Object%5D&originHeight=23&originWidth=12&originalType=url&status=done&style=none&taskId=ue888d34a-b25f-4c4e-ba0d-6a06bc4a1f6&width=12">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_074.svg#from=paste&height=23&id=ue05ee942&margin=%5Bobject%20Object%5D&originHeight=23&originWidth=168&originalType=url&status=done&style=none&taskId=u12ac507e-97a8-45b2-9228-f42443c10e0&width=168">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_075.svg#from=paste&height=18&id=u93f70d14&margin=%5Bobject%20Object%5D&originHeight=18&originWidth=22&originalType=url&status=done&style=none&taskId=u76be30ae-cf4b-4cac-ac8d-a9193fac966&width=22">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_076.svg#from=paste&height=23&id=uea8d82ad&margin=%5Bobject%20Object%5D&originHeight=23&originWidth=20&originalType=url&status=done&style=none&taskId=u1a6e2986-4df3-4732-96bf-219f10bff3e&width=20">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_077.svg#from=paste&height=23&id=u2c83b7c2&margin=%5Bobject%20Object%5D&originHeight=23&originWidth=12&originalType=url&status=done&style=none&taskId=uac8a5ce5-4a71-4024-8ad7-638cde96e2a&width=12">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_078.svg#from=paste&height=20&id=u48c8d1a2&margin=%5Bobject%20Object%5D&originHeight=20&originWidth=10&originalType=url&status=done&style=none&taskId=u9dfaae3e-5ee7-4a41-b146-530ba3d2ca4&width=10">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_079.svg#from=paste&height=18&id=u380fbfc4&margin=%5Bobject%20Object%5D&originHeight=18&originWidth=22&originalType=url&status=done&style=none&taskId=uc96fd74b-71a6-4280-91af-f2d5afca108&width=22">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_080.svg#from=paste&height=20&id=ue1ad77dc&margin=%5Bobject%20Object%5D&originHeight=20&originWidth=10&originalType=url&status=done&style=none&taskId=uad9d05e4-b55a-45e1-a93c-134bf1eb2c6&width=10">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_081.svg#from=paste&height=23&id=ud32a9b27&margin=%5Bobject%20Object%5D&originHeight=23&originWidth=419&originalType=url&status=done&style=none&taskId=u21418cda-baf8-4e62-a3b3-b6986432592&width=419">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_082.svg#from=paste&height=23&id=ue6d56396&margin=%5Bobject%20Object%5D&originHeight=23&originWidth=35&originalType=url&status=done&style=none&taskId=u5227ffa9-ce6d-43d3-903e-b041842d5d3&width=35">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_083.svg#from=paste&height=23&id=u8c43fe24&margin=%5Bobject%20Object%5D&originHeight=23&originWidth=33&originalType=url&status=done&style=none&taskId=u594429e0-965b-4026-b14e-285f38215a2&width=33">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_084.svg#from=paste&height=62&id=u7a6e7766&margin=%5Bobject%20Object%5D&originHeight=62&originWidth=675&originalType=url&status=done&style=none&taskId=u464727f2-6a35-4766-8324-36b6b97c480&width=675">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_085.svg#from=paste&height=65&id=u74e3ad68&margin=%5Bobject%20Object%5D&originHeight=65&originWidth=675&originalType=url&status=done&style=none&taskId=u2ad1f399-8e45-4dae-80d9-a9769ebdc17&width=675">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_086.svg#from=paste&height=65&id=u2b7939e9&margin=%5Bobject%20Object%5D&originHeight=65&originWidth=675&originalType=url&status=done&style=none&taskId=ud15de48e-7ab5-4879-aa11-43cb9ac871a&width=675">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_087.svg#from=paste&height=26&id=uaf9f5976&margin=%5Bobject%20Object%5D&originHeight=26&originWidth=46&originalType=url&status=done&style=none&taskId=uaed4683e-800b-4e2f-accf-2bf6d7bd6a0&width=46">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_088.svg#from=paste&height=60&id=u6e0028d6&margin=%5Bobject%20Object%5D&originHeight=60&originWidth=675&originalType=url&status=done&style=none&taskId=ue6c6774f-31e6-4672-a41d-c9021b568ad&width=675">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_089.svg#from=paste&height=20&id=udb79940e&margin=%5Bobject%20Object%5D&originHeight=20&originWidth=10&originalType=url&status=done&style=none&taskId=uaf0c2b74-2db9-4ca8-b3f2-26600baeadf&width=10">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_090.svg#from=paste&height=18&id=u64fe1b7a&margin=%5Bobject%20Object%5D&originHeight=18&originWidth=24&originalType=url&status=done&style=none&taskId=uda5ead86-a68d-4307-a71c-a8fb8ab37a2&width=24">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_091.svg#from=paste&height=15&id=u7005b005&margin=%5Bobject%20Object%5D&originHeight=15&originWidth=13&originalType=url&status=done&style=none&taskId=u9ab9a2b6-0a6a-489c-9517-5cdcee1901e&width=13">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_092.svg#from=paste&height=26&id=u6c51eed6&margin=%5Bobject%20Object%5D&originHeight=26&originWidth=118&originalType=url&status=done&style=none&taskId=u9736aac9-7467-49e5-a208-df827a6ef27&width=118">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_093.svg#from=paste&height=20&id=u615464fa&margin=%5Bobject%20Object%5D&originHeight=20&originWidth=12&originalType=url&status=done&style=none&taskId=ua7d087f1-79b6-4571-a769-5dabddc3d0a&width=12">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_094.svg#from=paste&height=20&id=u1acef715&margin=%5Bobject%20Object%5D&originHeight=20&originWidth=39&originalType=url&status=done&style=none&taskId=u7a681052-22b0-4487-8043-0195a387a18&width=39">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_095.svg#from=paste&height=18&id=ue5951763&margin=%5Bobject%20Object%5D&originHeight=18&originWidth=24&originalType=url&status=done&style=none&taskId=u6360e1a9-024f-4918-8f77-039d5c49ce8&width=24">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_096.svg#from=paste&height=20&id=ubd58d936&margin=%5Bobject%20Object%5D&originHeight=20&originWidth=27&originalType=url&status=done&style=none&taskId=u011ae27d-852d-47cb-baf0-dce8aad8e5b&width=27">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_097.svg#from=paste&height=60&id=uecffb03b&margin=%5Bobject%20Object%5D&originHeight=60&originWidth=675&originalType=url&status=done&style=none&taskId=u057845c6-52c1-4a2e-ad9a-26e5d5947e6&width=675">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_098.svg#from=paste&height=48&id=ub06d7f99&margin=%5Bobject%20Object%5D&originHeight=48&originWidth=675&originalType=url&status=done&style=none&taskId=ua22216fe-8b04-4bb0-915d-08707bad808&width=675">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_099.svg#from=paste&height=89&id=u8356b9cd&margin=%5Bobject%20Object%5D&originHeight=89&originWidth=675&originalType=url&status=done&style=none&taskId=ud5a25518-8c35-49a3-8bc5-cc16c02754d&width=675">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_100.svg#from=paste&height=368&id=uce17af15&margin=%5Bobject%20Object%5D&originHeight=368&originWidth=675&originalType=url&status=done&style=none&taskId=u3514e698-2ce4-435e-a212-5e57255ebc0&width=675">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_101.svg#from=paste&height=48&id=u275cb674&margin=%5Bobject%20Object%5D&originHeight=48&originWidth=675&originalType=url&status=done&style=none&taskId=ud759bc36-6036-4e76-9af2-4e9bac93a26&width=675">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_102.svg#from=paste&height=23&id=u8579b998&margin=%5Bobject%20Object%5D&originHeight=23&originWidth=23&originalType=url&status=done&style=none&taskId=ue8f29765-0b17-42bc-bb62-cde582239a2&width=23">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_103.svg#from=paste&height=23&id=u72772f63&margin=%5Bobject%20Object%5D&originHeight=23&originWidth=23&originalType=url&status=done&style=none&taskId=u784ed1e0-5eb8-4610-aca1-03ff619ff5b&width=23">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_104.svg#from=paste&height=23&id=u5acc1d0a&margin=%5Bobject%20Object%5D&originHeight=23&originWidth=23&originalType=url&status=done&style=none&taskId=u6620d40a-ef01-47ad-b74c-757aad02b69&width=23">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_105.jpg#from=paste&height=453&id=u1729e6a7&margin=%5Bobject%20Object%5D&originHeight=453&originWidth=1091&originalType=url&status=done&style=none&taskId=ucae89221-e43f-4596-9e5b-b7fe284a510&width=1091">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_106.svg#from=paste&height=120&id=u10d144eb&margin=%5Bobject%20Object%5D&originHeight=120&originWidth=120&originalType=url&status=done&style=none&taskId=ue6c2f4f7-d14b-4420-aee1-4f0fadbc002&width=120">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_107.jpg#from=paste&height=284&id=u5ff07eb7&margin=%5Bobject%20Object%5D&originHeight=284&originWidth=847&originalType=url&status=done&style=none&taskId=u2a6eea68-581f-498a-8102-1285d0e3952&width=847">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_108.svg#from=paste&height=20&id=uf6173422&margin=%5Bobject%20Object%5D&originHeight=20&originWidth=16&originalType=url&status=done&style=none&taskId=u0f7c22d7-f9d1-456a-9a93-aa7844dffe4&width=16">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_109.svg#from=paste&height=63&id=u17a7291e&margin=%5Bobject%20Object%5D&originHeight=63&originWidth=675&originalType=url&status=done&style=none&taskId=u2e79dc45-a861-4682-b63a-fa63cc2a409&width=675">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_110.svg#from=paste&height=59&id=u7c33c5be&margin=%5Bobject%20Object%5D&originHeight=59&originWidth=675&originalType=url&status=done&style=none&taskId=u34f1f161-fd92-4ad3-b6c1-f2263a7be7a&width=675">
<meta property="og:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_111.svg#from=paste&height=45&id=uf3287aaa&margin=%5Bobject%20Object%5D&originHeight=45&originWidth=675&originalType=url&status=done&style=none&taskId=u497cf7b4-1d82-4084-8d2b-f9acf7fc0fb&width=675">
<meta property="article:published_time" content="2021-04-02T07:23:25.000Z">
<meta property="article:modified_time" content="2025-07-20T14:18:39.449Z">
<meta property="article:author" content="Yan Zhang">
<meta property="article:tag" content="Rendering">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://graphicyan.github.io/assets/post_images/Cook-Torrance-BRDF/image_000.svg#from=paste&height=44&id=u1f6096cf&margin=%5Bobject%20Object%5D&originHeight=44&originWidth=675&originalType=url&status=done&style=none&taskId=udac5ec80-f6f7-4012-958b-43f395591ff&width=675">
    <meta http-equiv="Cache-control" content="no-cache">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link rel="icon" href="/intro/yan.jpg">
    <title>Cook-Torrance的BRDF · Yan&#39;s World</title>
    <!-- /*! loadCSS. [c]2017 Filament Group, Inc. MIT License */
/* This file is meant as a standalone workflow for
- testing support for link[rel=preload]
- enabling async CSS loading in browsers that do not support rel=preload
- applying rel preload css once loaded, whether supported or not.
*/ -->
<script>
    (function (w) {
        'use strict'
        // rel=preload support test
        if (!w.loadCSS) {
            w.loadCSS = function () {}
        }
        // define on the loadCSS obj
        var rp = (loadCSS.relpreload = {})
        // rel=preload feature support test
        // runs once and returns a function for compat purposes
        rp.support = (function () {
            var ret
            try {
                ret = w.document.createElement('link').relList.supports('preload')
            } catch (e) {
                ret = false
            }
            return function () {
                return ret
            }
        })()

        // if preload isn't supported, get an asynchronous load by using a non-matching media attribute
        // then change that media back to its intended value on load
        rp.bindMediaToggle = function (link) {
            // remember existing media attr for ultimate state, or default to 'all'
            var finalMedia = link.media || 'all'

            function enableStylesheet() {
                link.media = finalMedia
            }

            // bind load handlers to enable media
            if (link.addEventListener) {
                link.addEventListener('load', enableStylesheet)
            } else if (link.attachEvent) {
                link.attachEvent('onload', enableStylesheet)
            }

            // Set rel and non-applicable media type to start an async request
            // note: timeout allows this to happen async to let rendering continue in IE
            setTimeout(function () {
                link.rel = 'stylesheet'
                link.media = 'only x'
            })
            // also enable media after 3 seconds,
            // which will catch very old browsers (android 2.x, old firefox) that don't support onload on link
            setTimeout(enableStylesheet, 3000)
        }

        // loop through link elements in DOM
        rp.poly = function () {
            // double check this to prevent external calls from running
            if (rp.support()) {
                return
            }
            var links = w.document.getElementsByTagName('link')
            for (var i = 0; i < links.length; i++) {
                var link = links[i]
                // qualify links to those with rel=preload and as=style attrs
                if (
                    link.rel === 'preload' &&
                    link.getAttribute('as') === 'style' &&
                    !link.getAttribute('data-loadcss')
                ) {
                    // prevent rerunning on link
                    link.setAttribute('data-loadcss', true)
                    // bind listeners to toggle media back
                    rp.bindMediaToggle(link)
                }
            }
        }

        // if unsupported, run the polyfill
        if (!rp.support()) {
            // run once at least
            rp.poly()

            // rerun poly on an interval until onload
            var run = w.setInterval(rp.poly, 500)
            if (w.addEventListener) {
                w.addEventListener('load', function () {
                    rp.poly()
                    w.clearInterval(run)
                })
            } else if (w.attachEvent) {
                w.attachEvent('onload', function () {
                    rp.poly()
                    w.clearInterval(run)
                })
            }
        }

        // commonjs
        if (typeof exports !== 'undefined') {
            exports.loadCSS = loadCSS
        } else {
            w.loadCSS = loadCSS
        }
    })(typeof global !== 'undefined' ? global : this)
</script>

    <style type="text/css">
    @font-face {
        font-family: 'Oswald-Regular';
        src: url("/font/Oswald-Regular.ttf");
    }

    body {
        margin: 0;
    }

    header,
    footer,
    .footer-fixed-btn,
    .sidebar,
    .container,
    .site-intro-meta,
    .toc-wrapper {
        display: none;
    }

    .site-intro {
        position: relative;
        z-index: 3;
        width: 100%;
        /* height: 50vh; */
        overflow: hidden;
    }

    .site-intro-placeholder {
        position: absolute;
        z-index: -2;
        top: 0;
        left: 0;
        width: calc(100% + 300px);
        height: 100%;
        background: repeating-linear-gradient(
            -45deg,
            #444 0,
            #444 80px,
            #333 80px,
            #333 160px
        );
        background-position: center center;
        transform: translate3d(-226px, 0, 0);
        animation: gradient-move 2.5s ease-out 0s infinite;
    }

    @keyframes gradient-move {
        0% {
            transform: translate3d(-226px, 0, 0);
        }
        100% {
            transform: translate3d(0, 0, 0);
        }
    }
</style>

    <link id="stylesheet-fancybox" rel="preload" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.36/dist/fancybox/fancybox.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link id="stylesheet-base" rel="preload" href="/css/style.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link id="stylesheet-mobile" rel="preload" href="/css/mobile.css" as="style" onload="this.onload=null;this.rel='stylesheet';this.media='screen and (max-width: 960px)'">
    <link id="stylesheet-theme-dark" rel="preload" href="/css/dark.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" as="script">
    <link rel="preload" href="/scripts/main.js" as="script">
    <link rel="preload" href="/font/Oswald-Regular.ttf" as="font" crossorigin>
    <link rel="preload" href="https://at.alicdn.com/t/font_327081_1dta1rlogw17zaor.woff" as="font" crossorigin>
    <!-- algolia -->
    <!-- 百度统计  -->
    <!-- 谷歌统计  -->
    <!-- Google tag (gtag.js) -->
<meta name="generator" content="Hexo 6.3.0"></head>

    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
    <script type="text/javascript">
        if (typeof window.$ == undefined) {
            console.warn('jquery load from jsdelivr failed, will load local script')
            document.write('<script src="/lib/jquery.min.js" />')
        }
    </script>
        <body class="post-body">
        <!-- header -->
        <header class="header header-mobile">
    <!-- top read progress line -->
    <div class="header-element">
        <div class="read-progress"></div>
    </div>
    <!-- sidebar menu button -->
    <div class="header-element">
        <div class="header-sidebar-menu">
            <div style="padding-left: 1px;">&#xe775;</div>
        </div>
    </div>
    <!-- header actions -->
    <div class="header-actions">
        <!-- theme mode switch button -->
        <span class="header-theme-btn header-element">
            <i class="fas fa-adjust"></i>
        </span>
        <!-- back to home page text -->
        <span class="home-link header-element">
            <a href="/">Yan's World.</a>
        </span>
    </div>
    <!-- toggle banner -->
    <div class="banner">
        <div class="blog-title header-element">
            <a href="/">Yan&#39;s World.</a>
        </div>
        <div class="post-title header-element">
            <a href="#" class="post-name">Cook-Torrance的BRDF</a>
        </div>
    </div>
</header>

        <!-- fixed footer -->
        <footer class="footer-fixed">
    <!-- donate button -->

    <!-- back to top button -->
    <div class="footer-fixed-btn footer-fixed-btn--hidden back-top">
        <div>&#xe639;</div>
    </div>
</footer>

        <!-- wrapper -->
        <div class="wrapper">
            <div class="site-intro" style="    height:50vh;
">
    <!-- 主页  -->
    <!-- 404页  -->
    <div class="site-intro-placeholder"></div>
    <div class="site-intro-img" style="background-image: url(/intro/post-bg.jpg)"></div>
    <div class="site-intro-meta">
        <!-- 标题  -->
        <h1 class="intro-title">
            <!-- 主页  -->
                Cook-Torrance的BRDF
            <!-- 404 -->
        </h1>
        <!-- 副标题 -->
        <p class="intro-subtitle">
            <!-- 主页副标题  -->
            <!-- 404 -->
        </p>
        <!-- 文章页 meta -->
            <div class="post-intros">
                <!-- 文章页标签  -->
                    <div class="post-intro-tags" >
        <a class="post-tag" href="javascript:void(0);" data-tags="Rendering">Rendering</a>
</div>

                <!-- 文章字数统计 -->
                    <div class="post-intro-read">
                        <span>Word count: <span class="post-count word-count">2.2k</span>Reading time: <span class="post-count reading-time">7 min</span></span>
                    </div>
                <div class="post-intro-meta">
                    <!-- 撰写日期 -->
                    <span class="iconfont-archer post-intro-calander">&#xe676;</span>
                    <span class="post-intro-time">2021/04/02</span>
                    <!-- busuanzi -->
                        <span id="busuanzi_container_page_pv" class="busuanzi-pv">
                            <span class="iconfont-archer post-intro-busuanzi">&#xe602;</span>
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    <!-- 文章分享 -->
                    <span class="share-wrapper">
                        <span class="iconfont-archer share-icon">&#xe71d;</span>
                        <span class="share-text">Share</span>
                        <ul class="share-list">
                            <li class="iconfont-archer share-qr" data-type="qr">&#xe75b;
                                <div class="share-qrcode"></div>
                            </li>
                            <li class="iconfont-archer" data-type="weibo">&#xe619;</li>
                            <li class="iconfont-archer" data-type="qzone">&#xe62e;</li>
                            <li class="iconfont-archer" data-type="twitter">&#xe634;</li>
                            <li class="iconfont-archer" data-type="facebook">&#xe67a;</li>
                        </ul>
                    </span>
                </div>
            </div>
    </div>
</div>

            <script>
  // get user agent
  function getBrowserVersions() {
    var u = window.navigator.userAgent
    return {
      userAgent: u,
      trident: u.indexOf('Trident') > -1, //IE内核
      presto: u.indexOf('Presto') > -1, //opera内核
      webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
      gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
      mobile: !!u.match(/AppleWebKit.*Mobile.*/), //是否为移动终端
      ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
      android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
      iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者安卓QQ浏览器
      iPad: u.indexOf('iPad') > -1, //是否为iPad
      webApp: u.indexOf('Safari') == -1, //是否为web应用程序，没有头部与底部
      weixin: u.indexOf('MicroMessenger') == -1, //是否为微信浏览器
      uc: u.indexOf('UCBrowser') > -1, //是否为android下的UC浏览器
    }
  }
  var browser = {
    versions: getBrowserVersions(),
  }
  console.log('userAgent: ' + browser.versions.userAgent)

  // callback
  function fontLoaded() {
    console.log('font loaded')
    if (document.getElementsByClassName('site-intro-meta')) {
      document
        .getElementsByClassName('intro-title')[0]
        .classList.add('intro-fade-in')
      document
        .getElementsByClassName('intro-subtitle')[0]
        .classList.add('intro-fade-in')
      var postIntros = document.getElementsByClassName('post-intros')[0]
      if (postIntros) {
        postIntros.classList.add('post-fade-in')
      }
    }
  }

  // UC不支持跨域，所以直接显示
  function asyncCb() {
    if (browser.versions.uc) {
      console.log('UCBrowser')
      fontLoaded()
    } else {
      WebFont.load({
        custom: {
          families: ['Oswald-Regular'],
        },
        loading: function () {
          // 所有字体开始加载
          // console.log('font loading');
        },
        active: function () {
          // 所有字体已渲染
          fontLoaded()
        },
        inactive: function () {
          // 字体预加载失败，无效字体或浏览器不支持加载
          console.log('inactive: timeout')
          fontLoaded()
        },
        timeout: 5000, // Set the timeout to two seconds
      })
    }
  }

  function asyncErr() {
    console.warn('script load from CDN failed, will load local script')
  }

  // load webfont-loader async, and add callback function
  function async(u, cb, err) {
    var d = document,
      t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0]
    o.src = u
    if (cb) {
      o.addEventListener(
        'load',
        function (e) {
          cb(null, e)
        },
        false
      )
    }
    if (err) {
      o.addEventListener(
        'error',
        function (e) {
          err(null, e)
        },
        false
      )
    }
    s.parentNode.insertBefore(o, s)
  }

  var asyncLoadWithFallBack = function (arr, success, reject) {
    var currReject = function () {
      reject()
      arr.shift()
      if (arr.length) async(arr[0], success, currReject)
    }

    async(arr[0], success, currReject)
  }

  asyncLoadWithFallBack(
    [
      'https://cdn.jsdelivr.net/npm/webfontloader@1.6.28/webfontloader.min.js',
      'https://cdn.bootcss.com/webfont/1.6.28/webfontloader.js',
      "/lib/webfontloader.min.js",
    ],
    asyncCb,
    asyncErr
  )
</script>

            <img class="loading" src="/assets/loading.svg" style="display: block; margin: 6rem auto 0 auto; width: 6rem; height: 6rem;" alt="loading">
            <div class="container container-unloaded">
                <main class="main post-page">
    <article class="article-entry">
        <p>Cook-Torrance BRDF的定义:<br /><img src="/assets/post_images/Cook-Torrance-BRDF/image_000.svg#from=paste&height=44&id=u1f6096cf&margin=%5Bobject%20Object%5D&originHeight=44&originWidth=675&originalType=url&status=done&style=none&taskId=udac5ec80-f6f7-4012-958b-43f395591ff&width=675"><br />首先让我们先看看如何计算出<img src="/assets/post_images/Cook-Torrance-BRDF/image_001.svg#from=paste&height=23&id=u653a67dd&margin=%5Bobject%20Object%5D&originHeight=23&originWidth=63&originalType=url&status=done&style=none&taskId=u5a2d08d2-390d-4bea-a1a4-b06e7339dd0&width=63">。<br><a name="XKAM8"></a></p>
<h2 id="3-1-漫反射项推导"><a href="#3-1-漫反射项推导" class="headerlink" title="3.1 漫反射项推导"></a><strong>3.1 漫反射项推导</strong></h2><p>在很久之前谈光栅化的时候就提及过，漫反射会均匀的向每个方向反射<br /><img src="/assets/post_images/Cook-Torrance-BRDF/image_002.jpg#from=paste&height=383&id=u5a73d9de&margin=%5Bobject%20Object%5D&originHeight=383&originWidth=617&originalType=url&status=done&style=none&taskId=ub9550757-311a-43ba-9a91-98410a7b861&width=617"><br />因此，漫反射的BRDF一定是一个常数。假设入射光是均匀且遍布整个半球方向，可以得到如下方程：<br /><img src="/assets/post_images/Cook-Torrance-BRDF/image_003.jpg#from=paste&height=261&id=u4adb0527&margin=%5Bobject%20Object%5D&originHeight=261&originWidth=840&originalType=url&status=done&style=none&taskId=u3829682d-e5a3-4a9c-ad35-04c08e61745&width=840"><br />（根据定义<img src="/assets/post_images/Cook-Torrance-BRDF/image_004.svg#from=paste&height=23&id=uf7abef4b&margin=%5Bobject%20Object%5D&originHeight=23&originWidth=137&originalType=url&status=done&style=none&taskId=u97cac1da-3352-4542-ba99-db307a11830&width=137">， 积分过程省略） 由于假设入射光是均匀且遍布整个半球方向，所以<img src="/assets/post_images/Cook-Torrance-BRDF/image_005.svg#from=paste&height=23&id=u7ffcba90&margin=%5Bobject%20Object%5D&originHeight=23&originWidth=21&originalType=url&status=done&style=none&taskId=ub3c6f941-f93b-4127-b266-6e2e44f669d&width=21">与方向无关，且等于<img src="/assets/post_images/Cook-Torrance-BRDF/image_006.svg#from=paste&height=23&id=u85e8414b&margin=%5Bobject%20Object%5D&originHeight=23&originWidth=24&originalType=url&status=done&style=none&taskId=uc1baa105-9c17-47e6-a4aa-8f325ebf36c&width=24">，最终约去两边<img src="/assets/post_images/Cook-Torrance-BRDF/image_007.svg#from=paste&height=20&id=uf94ccd9e&margin=%5Bobject%20Object%5D&originHeight=20&originWidth=14&originalType=url&status=done&style=none&taskId=ud7d5515c-625f-4429-a059-5998a307cf4&width=14">，得到结果：<br /><img src="/assets/post_images/Cook-Torrance-BRDF/image_008.svg#from=paste&height=57&id=u6152c488&margin=%5Bobject%20Object%5D&originHeight=57&originWidth=675&originalType=url&status=done&style=none&taskId=u0e8479cf-65ba-4bd9-a04c-d566cd5c66f&width=675"><br />但有一点要注意的是，这里并没有考虑能量被吸收，将反射率考虑进来之后，得到最终的漫反射BRDF：<br /><img src="/assets/post_images/Cook-Torrance-BRDF/image_009.svg#from=paste&height=54&id=u00c4a599&margin=%5Bobject%20Object%5D&originHeight=54&originWidth=675&originalType=url&status=done&style=none&taskId=u94796a54-97fe-4089-8652-01cd37b9f2c&width=675"><br />这里的<img src="/assets/post_images/Cook-Torrance-BRDF/image_010.svg#from=paste&height=20&id=ubaa9c8d7&margin=%5Bobject%20Object%5D&originHeight=20&originWidth=11&originalType=url&status=done&style=none&taskId=u9ed945a7-d18f-440c-88a3-f36e1b9853a&width=11">可以类比光栅化当中的漫反射系数去理解，本质就是一个3维向量，含有物体表面的颜色信息。<br><a name="YoFOT"></a></p>
<h2 id="3-2-镜面反射项推导"><a href="#3-2-镜面反射项推导" class="headerlink" title="3.2 镜面反射项推导"></a><strong>3.2 镜面反射项推导</strong></h2><p>漫反射项的形式简单且比较容易理解，但是对于镜面反射项，其形式则要更加高级一点：<br /><img src="/assets/post_images/Cook-Torrance-BRDF/image_011.svg#from=paste&height=68&id=ub446b41a&margin=%5Bobject%20Object%5D&originHeight=68&originWidth=675&originalType=url&status=done&style=none&taskId=u6f5e5c5b-7b9f-4dcd-8cc9-45382254769&width=675"><br />看起来确实有些唬人，但是不要急，让我们先简单的解释一下式子当中各项参数，之和再一步步的进行详细阐述： 其中<img src="/assets/post_images/Cook-Torrance-BRDF/image_012.svg#from=paste&height=15&id=u19fc8cb3&margin=%5Bobject%20Object%5D&originHeight=15&originWidth=10&originalType=url&status=done&style=none&taskId=u0aa36a34-67d6-46a4-a7a9-546d4da5d02&width=10">为反射方向(观察方向)，<img src="/assets/post_images/Cook-Torrance-BRDF/image_013.svg#from=paste&height=20&id=u29652c75&margin=%5Bobject%20Object%5D&originHeight=20&originWidth=6&originalType=url&status=done&style=none&taskId=u4d9f2d7f-566b-4b21-9d11-b21e72be70d&width=6">为入射方向，<img src="/assets/post_images/Cook-Torrance-BRDF/image_014.svg#from=paste&height=15&id=u762f01cf&margin=%5Bobject%20Object%5D&originHeight=15&originWidth=13&originalType=url&status=done&style=none&taskId=uaa5228aa-e424-41e6-b043-69f138bbd63&width=13">为<strong>宏观表面法向</strong>，<img src="/assets/post_images/Cook-Torrance-BRDF/image_015.svg#from=paste&height=20&id=u3e9e3193&margin=%5Bobject%20Object%5D&originHeight=20&originWidth=12&originalType=url&status=done&style=none&taskId=ud9fca269-ad25-4084-8bbe-ba147900666&width=12">为<strong>微平面法向</strong><br />分子上的<img src="/assets/post_images/Cook-Torrance-BRDF/image_016.svg#from=paste&height=23&id=u82397aba&margin=%5Bobject%20Object%5D&originHeight=23&originWidth=68&originalType=url&status=done&style=none&taskId=ub78efde6-6563-4074-ac62-18a91bb96bd&width=68">为3个不同的函数：<br /><strong>函数D：法线分布函数(Normal Distribution Function)，其代表了所有微观角度下微小镜面法线的分布情况，粗糙表面法线分布相对均匀，光滑表面法线分布相对集中 (这种解释可能会有些抽象，后面会给出更加直观的物理上的解释)</strong><br /><strong>函数G：几何函数(Geometry Function)，描述了微平面自遮挡的属性。当一个平面相对比较粗糙的时候，平面表面上的微平面有可能挡住其他的微平面从而减少表面所反射的光线。</strong><br /><strong>函数F：菲涅尔方程(Fresnel Rquation)，描述了物体表面在不同入射光角度下反射光线所占的比率</strong><br />可以看出无论是几何函数G，还是菲涅尔方程F，都是由于观察方向，入射方向的不同所导致的只有部分光线能够被反射<br /><img src="/assets/post_images/Cook-Torrance-BRDF/image_017.svg#from=paste&height=45&id=u622aee9c&margin=%5Bobject%20Object%5D&originHeight=45&originWidth=675&originalType=url&status=done&style=none&taskId=uc55f9c37-063e-4cd3-9efc-26a77979327&width=675"><img src="/assets/post_images/Cook-Torrance-BRDF/image_018.svg#from=paste&height=45&id=u1649bbb3&margin=%5Bobject%20Object%5D&originHeight=45&originWidth=675&originalType=url&status=done&style=none&taskId=u58549714-3fc8-44ba-8f6b-e9739521826&width=675"><br />因此先假设没有光线会为上述两个函数产生损失（即二者都&#x3D;1），方便我们进行BRDF推导。<br />在上文中，函数<img src="/assets/post_images/Cook-Torrance-BRDF/image_019.svg#from=paste&height=20&id=u4e6bcaf3&margin=%5Bobject%20Object%5D&originHeight=20&originWidth=17&originalType=url&status=done&style=none&taskId=uc4d924af-dc8b-46ad-aa92-1183dd25c0d&width=17">被解释为微观角度下微小镜面法线的分布函数，其函数接受一个参数为<img src="/assets/post_images/Cook-Torrance-BRDF/image_020.svg#from=paste&height=20&id=ud4180fc2&margin=%5Bobject%20Object%5D&originHeight=20&originWidth=12&originalType=url&status=done&style=none&taskId=u614dabff-8849-44b9-addb-481b3b9662b&width=12">，即微平面的法线向量，<strong>更直观的来说，D(h)的物理含义为所有法向为</strong><img src="/assets/post_images/Cook-Torrance-BRDF/image_021.svg#from=paste&height=20&id=uaa99bc40&margin=%5Bobject%20Object%5D&originHeight=20&originWidth=12&originalType=url&status=done&style=none&taskId=u6d5adb96-6221-4c11-8d5e-d7a3716b99e&width=12"><strong>的微平面的面积</strong>，没错就是面积，你没有看错，只不过我们要说明的是什么条件下的，法线方向为<img src="/assets/post_images/Cook-Torrance-BRDF/image_022.svg#from=paste&height=20&id=u09b05592&margin=%5Bobject%20Object%5D&originHeight=20&originWidth=12&originalType=url&status=done&style=none&taskId=u744cc614-794f-4ca1-aac0-68039218316&width=12">的微平面面积，需要加上限制：<br />(1) 第一，我们所关注的区域仅仅是一个着色点，或者说一个微分面积元，因此<img src="/assets/post_images/Cook-Torrance-BRDF/image_023.svg#from=paste&height=26&id=u896d9440&margin=%5Bobject%20Object%5D&originHeight=26&originWidth=46&originalType=url&status=done&style=none&taskId=u931aee85-a38c-4667-a23d-e39866d99f4&width=46">所指的应该是单位面积下，所有法向为<img src="/assets/post_images/Cook-Torrance-BRDF/image_024.svg#from=paste&height=20&id=u8ef475d2&margin=%5Bobject%20Object%5D&originHeight=20&originWidth=12&originalType=url&status=done&style=none&taskId=u1aab23fb-21a2-41a4-ad44-52245f1d2b2&width=12">的微平面的面积。<br />(2) 第二， 微平面的法线<img src="/assets/post_images/Cook-Torrance-BRDF/image_025.svg#from=paste&height=20&id=uc1db05a7&margin=%5Bobject%20Object%5D&originHeight=20&originWidth=12&originalType=url&status=done&style=none&taskId=uea16520e-7b69-40b8-b6fa-34453bf6939&width=12">是一个离散数值，而微平面法线分布是连续的，因此是几乎不可能精确的找到法线为某个固定值的微平面的，因此为<img src="/assets/post_images/Cook-Torrance-BRDF/image_026.svg#from=paste&height=26&id=u8b3bfd46&margin=%5Bobject%20Object%5D&originHeight=26&originWidth=46&originalType=url&status=done&style=none&taskId=ubd93c239-220f-4d3e-ad4c-b297a10bdb5&width=46">完善第二个限制，即加上每单位立体角，使其变成一个范围，此时<img src="/assets/post_images/Cook-Torrance-BRDF/image_027.svg#from=paste&height=26&id=u7ae81139&margin=%5Bobject%20Object%5D&originHeight=26&originWidth=46&originalType=url&status=done&style=none&taskId=ud276b49a-2d8f-4f11-8945-c9d8d317d2b&width=46">则变成了每单位立体角所有法向为<img src="/assets/post_images/Cook-Torrance-BRDF/image_028.svg#from=paste&height=20&id=u86d3351b&margin=%5Bobject%20Object%5D&originHeight=20&originWidth=12&originalType=url&status=done&style=none&taskId=u46d7377b-e25a-4b76-b5b7-d566f7e2836&width=12">的微平面的面积。<br />(关于第二点限制可能有些不太好理解，其实这可以类比连续型随机变量取一点概率为0，道理是一样的)<br />好了，加上这两点限制之后，便得到了<img src="/assets/post_images/Cook-Torrance-BRDF/image_029.svg#from=paste&height=26&id=u7b903e31&margin=%5Bobject%20Object%5D&originHeight=26&originWidth=46&originalType=url&status=done&style=none&taskId=u0fc18995-ad4f-45b5-a623-6a977092842&width=46">的真正的物理含义，<strong>即每单位面积,每单位立体角所有法向为</strong><img src="/assets/post_images/Cook-Torrance-BRDF/image_030.svg#from=paste&height=20&id=u11b758db&margin=%5Bobject%20Object%5D&originHeight=20&originWidth=12&originalType=url&status=done&style=none&taskId=uf0b8d062-d4a4-48a2-aee4-02ee2ed033e&width=12"><strong>的微平面的面积</strong>。接下来当确定了观察方向<img src="/assets/post_images/Cook-Torrance-BRDF/image_031.svg#from=paste&height=15&id=u1f1c7a05&margin=%5Bobject%20Object%5D&originHeight=15&originWidth=10&originalType=url&status=done&style=none&taskId=u9e6b3038-a66f-41ac-b4d0-c500e4f780d&width=10">和入射方向<img src="/assets/post_images/Cook-Torrance-BRDF/image_032.svg#from=paste&height=20&id=u3446b9be&margin=%5Bobject%20Object%5D&originHeight=20&originWidth=6&originalType=url&status=done&style=none&taskId=u2a8b6a30-efca-46f0-8ea8-7531fde1660&width=6">之后，我们所真正在乎的能对镜面反射做出贡献的只有法线为<img src="/assets/post_images/Cook-Torrance-BRDF/image_033.svg#from=paste&height=26&id=u360ed13d&margin=%5Bobject%20Object%5D&originHeight=26&originWidth=174&originalType=url&status=done&style=none&taskId=u67f6bdaa-3232-4dec-8c15-7edefd681a3&width=174">的微平面，如下图所示：<br /><img src="/assets/post_images/Cook-Torrance-BRDF/image_034.jpeg#from=paste&height=203&id=ucbf0b9a9&margin=%5Bobject%20Object%5D&originHeight=203&originWidth=915&originalType=url&status=done&style=none&taskId=u7040579b-cc69-4e8f-ae68-0f366dd5432&width=915"><br />只有图中红色的微平面才能对镜面反射做出贡献，利用刚刚得到的关于<img src="/assets/post_images/Cook-Torrance-BRDF/image_035.svg#from=paste&height=26&id=u576e6896&margin=%5Bobject%20Object%5D&originHeight=26&originWidth=46&originalType=url&status=done&style=none&taskId=u3f0dc219-ef89-4867-833d-e372ba86aa0&width=46">的物理含义，不难计算得到，所有红色微平面面积<img src="/assets/post_images/Cook-Torrance-BRDF/image_036.svg#from=paste&height=26&id=u02ac6fad&margin=%5Bobject%20Object%5D&originHeight=26&originWidth=223&originalType=url&status=done&style=none&taskId=u6ad41389-ead5-4144-9ac6-799ebf80f70&width=223"><br />(本文以下用<img src="/assets/post_images/Cook-Torrance-BRDF/image_037.svg#from=paste&height=18&id=u5f1f6bf9&margin=%5Bobject%20Object%5D&originHeight=18&originWidth=20&originalType=url&status=done&style=none&taskId=ue6a68a5c-3c87-401f-b1c4-646e09c78d8&width=20">代替入射方向<img src="/assets/post_images/Cook-Torrance-BRDF/image_038.svg#from=paste&height=20&id=uf2219594&margin=%5Bobject%20Object%5D&originHeight=20&originWidth=6&originalType=url&status=done&style=none&taskId=ua294b6ee-a741-4c13-9de7-91f5923d83b&width=6">，<img src="/assets/post_images/Cook-Torrance-BRDF/image_039.svg#from=paste&height=18&id=u223b1d12&margin=%5Bobject%20Object%5D&originHeight=18&originWidth=22&originalType=url&status=done&style=none&taskId=u17976c48-1932-4046-b592-e85592500fd&width=22">代替观察方向<img src="/assets/post_images/Cook-Torrance-BRDF/image_040.svg#from=paste&height=15&id=uec90143f&margin=%5Bobject%20Object%5D&originHeight=15&originWidth=10&originalType=url&status=done&style=none&taskId=u863661e4-ba3c-44c8-a97c-fe470fa67df&width=10">，<img src="/assets/post_images/Cook-Torrance-BRDF/image_041.svg#from=paste&height=18&id=u64fb4020&margin=%5Bobject%20Object%5D&originHeight=18&originWidth=24&originalType=url&status=done&style=none&taskId=uc6e34ddb-9972-4e98-a27f-cf8c68f5996&width=24">代替微平面法向<img src="/assets/post_images/Cook-Torrance-BRDF/image_042.svg#from=paste&height=20&id=u952cdf9b&margin=%5Bobject%20Object%5D&originHeight=20&originWidth=12&originalType=url&status=done&style=none&taskId=uac7e9f03-58ce-47fa-a6df-2433094fb0e&width=12">)<br />那么根据该面积可以计算出入射的辐射通量<br /><img src="/assets/post_images/Cook-Torrance-BRDF/image_043.svg#from=paste&height=95&id=u2be57d99&margin=%5Bobject%20Object%5D&originHeight=95&originWidth=675&originalType=url&status=done&style=none&taskId=ufaf458e7-9785-4cf4-96b0-d48a15cd0af&width=675"><br />(<img src="/assets/post_images/Cook-Torrance-BRDF/image_044.svg#from=paste&height=29&id=u73444e2d&margin=%5Bobject%20Object%5D&originHeight=29&originWidth=80&originalType=url&status=done&style=none&taskId=u228ac38d-bdf5-4a02-b33e-8ea905c60b2&width=80">是<img src="/assets/post_images/Cook-Torrance-BRDF/image_045.svg#from=paste&height=26&id=u9197e6e0&margin=%5Bobject%20Object%5D&originHeight=26&originWidth=67&originalType=url&status=done&style=none&taskId=ub0fa703e-3fba-4b7c-8336-dbfce52d3f0&width=67">在入射光线方向的投影垂直面积，<img src="/assets/post_images/Cook-Torrance-BRDF/image_046.svg#from=paste&height=23&id=ud279c92d&margin=%5Bobject%20Object%5D&originHeight=23&originWidth=20&originalType=url&status=done&style=none&taskId=u0de0326f-d16b-4917-85b6-4da189d890b&width=20">为入射光线<img src="/assets/post_images/Cook-Torrance-BRDF/image_047.svg#from=paste&height=18&id=u32cb97f7&margin=%5Bobject%20Object%5D&originHeight=18&originWidth=20&originalType=url&status=done&style=none&taskId=ub813f240-8934-4846-8257-d14ddfddb1e&width=20">与微平面法线<img src="/assets/post_images/Cook-Torrance-BRDF/image_048.svg#from=paste&height=18&id=ub334ea57&margin=%5Bobject%20Object%5D&originHeight=18&originWidth=24&originalType=url&status=done&style=none&taskId=u1e910778-b1c7-4d93-be20-78f0c36c8e5&width=24">的夹角)<br />因为此时不考虑菲涅尔项以及几何函数所带来的光线损失，所以<br /><img src="/assets/post_images/Cook-Torrance-BRDF/image_049.svg#from=paste&height=44&id=ufcf3f559&margin=%5Bobject%20Object%5D&originHeight=44&originWidth=675&originalType=url&status=done&style=none&taskId=u8e073820-5875-4b29-bf9e-70d855ac98d&width=675"><br />进一步，根据辐出度radiance定义，计算得<br /><img src="/assets/post_images/Cook-Torrance-BRDF/image_050.svg#from=paste&height=65&id=u43a35287&margin=%5Bobject%20Object%5D&originHeight=65&originWidth=675&originalType=url&status=done&style=none&taskId=u38580368-deed-4a86-a919-b960985232b&width=675"><br />最后由BRDF定易得<br /><img src="/assets/post_images/Cook-Torrance-BRDF/image_051.svg#from=paste&height=68&id=uf0155597&margin=%5Bobject%20Object%5D&originHeight=68&originWidth=675&originalType=url&status=done&style=none&taskId=uef11399e-9d45-492d-ab8b-61174f81d74&width=675"><br />其中，<img src="/assets/post_images/Cook-Torrance-BRDF/image_052.svg#from=paste&height=23&id=u5adbd982&margin=%5Bobject%20Object%5D&originHeight=23&originWidth=17&originalType=url&status=done&style=none&taskId=u7f874af5-0e7f-4570-9abe-c69088e4e73&width=17">是入射光线<img src="/assets/post_images/Cook-Torrance-BRDF/image_053.svg#from=paste&height=18&id=ubada6e0b&margin=%5Bobject%20Object%5D&originHeight=18&originWidth=20&originalType=url&status=done&style=none&taskId=u57dc33f7-f09f-4200-869f-1c083d8f442&width=20">与宏观法线方向<img src="/assets/post_images/Cook-Torrance-BRDF/image_054.svg#from=paste&height=15&id=ubf46313f&margin=%5Bobject%20Object%5D&originHeight=15&originWidth=13&originalType=url&status=done&style=none&taskId=u9e4d59b5-f631-4960-9920-2b105e9ee73&width=13">的夹角，<img src="/assets/post_images/Cook-Torrance-BRDF/image_055.svg#from=paste&height=23&id=u59ee9ec2&margin=%5Bobject%20Object%5D&originHeight=23&originWidth=19&originalType=url&status=done&style=none&taskId=u8401fdf5-1ced-469c-9da9-227650336a7&width=19">是出射光线<img src="/assets/post_images/Cook-Torrance-BRDF/image_056.svg#from=paste&height=18&id=ue668bdcc&margin=%5Bobject%20Object%5D&originHeight=18&originWidth=22&originalType=url&status=done&style=none&taskId=uf4baaa26-ad93-4631-9da5-4f5ade189d9&width=22">与宏观法线方向<img src="/assets/post_images/Cook-Torrance-BRDF/image_057.svg#from=paste&height=15&id=uc1ca41a3&margin=%5Bobject%20Object%5D&originHeight=15&originWidth=13&originalType=url&status=done&style=none&taskId=ub49734a3-7497-4017-a29b-a193030e95a&width=13">的夹角，<img src="/assets/post_images/Cook-Torrance-BRDF/image_058.svg#from=paste&height=23&id=u41c5adf2&margin=%5Bobject%20Object%5D&originHeight=23&originWidth=20&originalType=url&status=done&style=none&taskId=ua9a6c0f0-1331-4f88-aea6-0f549bf0964&width=20">是入射光线<img src="/assets/post_images/Cook-Torrance-BRDF/image_059.svg#from=paste&height=18&id=u17bccd56&margin=%5Bobject%20Object%5D&originHeight=18&originWidth=20&originalType=url&status=done&style=none&taskId=u446e7c40-8a0a-4546-a6e7-eaccd3825e6&width=20">与微平面法线方向<img src="/assets/post_images/Cook-Torrance-BRDF/image_060.svg#from=paste&height=18&id=ua0ca7b84&margin=%5Bobject%20Object%5D&originHeight=18&originWidth=24&originalType=url&status=done&style=none&taskId=ubfb37115-e132-4906-9da3-b67bbad760e&width=24">的夹角。<br />最后一步，只需要找到<img src="/assets/post_images/Cook-Torrance-BRDF/image_061.svg#from=paste&height=26&id=u96ebdf3e&margin=%5Bobject%20Object%5D&originHeight=26&originWidth=78&originalType=url&status=done&style=none&taskId=u46c12d46-5127-4faa-9bb3-ad3db631412&width=78">的比值，就可以成功推导出镜面反射的BRDF了。那么<img src="/assets/post_images/Cook-Torrance-BRDF/image_062.svg#from=paste&height=26&id=u4593518c&margin=%5Bobject%20Object%5D&originHeight=26&originWidth=78&originalType=url&status=done&style=none&taskId=u955a3c77-af7b-4696-8e52-5cb00cb684a&width=78">的从直观角度去看到底是指什么呢？很简单，如下图所示：<br /><img src="/assets/post_images/Cook-Torrance-BRDF/image_063.jpeg#from=paste&height=434&id=u8b311ac9&margin=%5Bobject%20Object%5D&originHeight=434&originWidth=768&originalType=url&status=done&style=none&taskId=ub29ff17b-6e03-4eb3-a521-cd4c123e32f&width=768"><br />首先固定入射方向<img src="/assets/post_images/Cook-Torrance-BRDF/image_064.svg#from=paste&height=18&id=ucfde2fc1&margin=%5Bobject%20Object%5D&originHeight=18&originWidth=20&originalType=url&status=done&style=none&taskId=u48ecb6dd-0222-4b93-a119-5a060a3890f&width=20">，微分立体角<img src="/assets/post_images/Cook-Torrance-BRDF/image_065.svg#from=paste&height=23&id=u3f469000&margin=%5Bobject%20Object%5D&originHeight=23&originWidth=35&originalType=url&status=done&style=none&taskId=u87e24a62-422c-4655-a85d-53429855b63&width=35">是一个很小的范围，那么这样一个很小的范围所对应的反射角自然也是一个很小的范围<img src="/assets/post_images/Cook-Torrance-BRDF/image_066.svg#from=paste&height=23&id=uedd1ed36&margin=%5Bobject%20Object%5D&originHeight=23&originWidth=33&originalType=url&status=done&style=none&taskId=u13d58571-361c-4fb4-8a88-2a52ba24201&width=33">，形象的来看，就是转动平面得到所有微观法线在<img src="/assets/post_images/Cook-Torrance-BRDF/image_067.svg#from=paste&height=23&id=u4d5596dd&margin=%5Bobject%20Object%5D&originHeight=23&originWidth=35&originalType=url&status=done&style=none&taskId=ubc10c9c9-0faf-4b94-a80a-e5f4c394d58&width=35">范围之内的平面，通过这些微平面，所得到的反射范围。那么如何求得这样一个比值呢，以入射方向<img src="/assets/post_images/Cook-Torrance-BRDF/image_068.svg#from=paste&height=18&id=u1a5e69f2&margin=%5Bobject%20Object%5D&originHeight=18&originWidth=20&originalType=url&status=done&style=none&taskId=u2cb5570f-0039-478c-8e46-2e771a736a9&width=20">为<img src="/assets/post_images/Cook-Torrance-BRDF/image_069.svg#from=paste&height=15&id=u7288bf11&margin=%5Bobject%20Object%5D&originHeight=15&originWidth=10&originalType=url&status=done&style=none&taskId=ud7ff3d50-98e2-468c-afb8-a6149cdbad9&width=10">轴负方向，建立球面坐标系如下：<br /><img src="/assets/post_images/Cook-Torrance-BRDF/image_070.jpeg#from=paste&height=694&id=ud2c8ebab&margin=%5Bobject%20Object%5D&originHeight=694&originWidth=717&originalType=url&status=done&style=none&taskId=u87d8b61f-3f96-4026-9dfc-50bf129586a&width=717"><br />(嗨呀，画的真丑，凑合看看吧)<br />根据图中的<strong>单位</strong>球面坐标系以及标注的角度，不难得出<img src="/assets/post_images/Cook-Torrance-BRDF/image_071.svg#from=paste&height=18&id=u82618f4e&margin=%5Bobject%20Object%5D&originHeight=18&originWidth=24&originalType=url&status=done&style=none&taskId=u20872285-7e87-4b87-a8ef-2e3d780ee90&width=24">的球面坐标为(1，<img src="/assets/post_images/Cook-Torrance-BRDF/image_072.svg#from=paste&height=23&id=ub64989d5&margin=%5Bobject%20Object%5D&originHeight=23&originWidth=20&originalType=url&status=done&style=none&taskId=u429d7204-00d1-4f4d-b7a3-dd84c0bd8d9&width=20">，<img src="/assets/post_images/Cook-Torrance-BRDF/image_073.svg#from=paste&height=23&id=u8bd5d5ba&margin=%5Bobject%20Object%5D&originHeight=23&originWidth=12&originalType=url&status=done&style=none&taskId=ue888d34a-b25f-4c4e-ba0d-6a06bc4a1f6&width=12">)，则不难计算出微分立体角<br /><img src="/assets/post_images/Cook-Torrance-BRDF/image_074.svg#from=paste&height=23&id=ue05ee942&margin=%5Bobject%20Object%5D&originHeight=23&originWidth=168&originalType=url&status=done&style=none&taskId=u12ac507e-97a8-45b2-9228-f42443c10e0&width=168"><br />同时<img src="/assets/post_images/Cook-Torrance-BRDF/image_075.svg#from=paste&height=18&id=u93f70d14&margin=%5Bobject%20Object%5D&originHeight=18&originWidth=22&originalType=url&status=done&style=none&taskId=u76be30ae-cf4b-4cac-ac8d-a9193fac966&width=22">的球面坐标为(1，2<img src="/assets/post_images/Cook-Torrance-BRDF/image_076.svg#from=paste&height=23&id=uea8d82ad&margin=%5Bobject%20Object%5D&originHeight=23&originWidth=20&originalType=url&status=done&style=none&taskId=u1a6e2986-4df3-4732-96bf-219f10bff3e&width=20">，<img src="/assets/post_images/Cook-Torrance-BRDF/image_077.svg#from=paste&height=23&id=u2c83b7c2&margin=%5Bobject%20Object%5D&originHeight=23&originWidth=12&originalType=url&status=done&style=none&taskId=uac8a5ce5-4a71-4024-8ad7-638cde96e2a&width=12">)，因为<img src="/assets/post_images/Cook-Torrance-BRDF/image_078.svg#from=paste&height=20&id=u48c8d1a2&margin=%5Bobject%20Object%5D&originHeight=20&originWidth=10&originalType=url&status=done&style=none&taskId=u9dfaae3e-5ee7-4a41-b146-530ba3d2ca4&width=10">角变为两倍，那么对于<img src="/assets/post_images/Cook-Torrance-BRDF/image_079.svg#from=paste&height=18&id=u380fbfc4&margin=%5Bobject%20Object%5D&originHeight=18&originWidth=22&originalType=url&status=done&style=none&taskId=uc96fd74b-71a6-4280-91af-f2d5afca108&width=22">来说<img src="/assets/post_images/Cook-Torrance-BRDF/image_080.svg#from=paste&height=20&id=ue1ad77dc&margin=%5Bobject%20Object%5D&originHeight=20&originWidth=10&originalType=url&status=done&style=none&taskId=uad9d05e4-b55a-45e1-a93c-134bf1eb2c6&width=10">角度的微分变化应该也为两倍，因此计算得到<br /><img src="/assets/post_images/Cook-Torrance-BRDF/image_081.svg#from=paste&height=23&id=ud32a9b27&margin=%5Bobject%20Object%5D&originHeight=23&originWidth=419&originalType=url&status=done&style=none&taskId=u21418cda-baf8-4e62-a3b3-b6986432592&width=419"><br />此时已经知道了<img src="/assets/post_images/Cook-Torrance-BRDF/image_082.svg#from=paste&height=23&id=ue6d56396&margin=%5Bobject%20Object%5D&originHeight=23&originWidth=35&originalType=url&status=done&style=none&taskId=u5227ffa9-ce6d-43d3-903e-b041842d5d3&width=35">与<img src="/assets/post_images/Cook-Torrance-BRDF/image_083.svg#from=paste&height=23&id=u8c43fe24&margin=%5Bobject%20Object%5D&originHeight=23&originWidth=33&originalType=url&status=done&style=none&taskId=u594429e0-965b-4026-b14e-285f38215a2&width=33">，那么<br /><img src="/assets/post_images/Cook-Torrance-BRDF/image_084.svg#from=paste&height=62&id=u7a6e7766&margin=%5Bobject%20Object%5D&originHeight=62&originWidth=675&originalType=url&status=done&style=none&taskId=u464727f2-6a35-4766-8324-36b6b97c480&width=675"><br />将此关系代入上面的镜面BRDF得到：<br /><img src="/assets/post_images/Cook-Torrance-BRDF/image_085.svg#from=paste&height=65&id=u74e3ad68&margin=%5Bobject%20Object%5D&originHeight=65&originWidth=675&originalType=url&status=done&style=none&taskId=u2ad1f399-8e45-4dae-80d9-a9769ebdc17&width=675"><br />最后将我们一开始忽略掉的菲涅尔项与几何函数重新加入<br /><img src="/assets/post_images/Cook-Torrance-BRDF/image_086.svg#from=paste&height=65&id=u2b7939e9&margin=%5Bobject%20Object%5D&originHeight=65&originWidth=675&originalType=url&status=done&style=none&taskId=ud15de48e-7ab5-4879-aa11-43cb9ac871a&width=675"><br />至此就已经完成了Cook-Torrance BRDF的所有推导了。<br />**tips:**还有一点有关<img src="/assets/post_images/Cook-Torrance-BRDF/image_087.svg#from=paste&height=26&id=uaf9f5976&margin=%5Bobject%20Object%5D&originHeight=26&originWidth=46&originalType=url&status=done&style=none&taskId=uaed4683e-800b-4e2f-accf-2bf6d7bd6a0&width=46">可以注意的是，对于法线分布函数的设计应该满足<br /><img src="/assets/post_images/Cook-Torrance-BRDF/image_088.svg#from=paste&height=60&id=u6e0028d6&margin=%5Bobject%20Object%5D&originHeight=60&originWidth=675&originalType=url&status=done&style=none&taskId=ue6c6774f-31e6-4672-a41d-c9021b568ad&width=675"><br />（<img src="/assets/post_images/Cook-Torrance-BRDF/image_089.svg#from=paste&height=20&id=udb79940e&margin=%5Bobject%20Object%5D&originHeight=20&originWidth=10&originalType=url&status=done&style=none&taskId=uaf0c2b74-2db9-4ca8-b3f2-26600baeadf&width=10">为微平面法向<img src="/assets/post_images/Cook-Torrance-BRDF/image_090.svg#from=paste&height=18&id=u64fe1b7a&margin=%5Bobject%20Object%5D&originHeight=18&originWidth=24&originalType=url&status=done&style=none&taskId=uda5ead86-a68d-4307-a71c-a8fb8ab37a2&width=24">与宏观法向<img src="/assets/post_images/Cook-Torrance-BRDF/image_091.svg#from=paste&height=15&id=u7005b005&margin=%5Bobject%20Object%5D&originHeight=15&originWidth=13&originalType=url&status=done&style=none&taskId=u9ab9a2b6-0a6a-489c-9517-5cdcee1901e&width=13">的夹角） 从几何角度很容易解释，因为<img src="/assets/post_images/Cook-Torrance-BRDF/image_092.svg#from=paste&height=26&id=u6c51eed6&margin=%5Bobject%20Object%5D&originHeight=26&originWidth=118&originalType=url&status=done&style=none&taskId=u9736aac9-7467-49e5-a208-df827a6ef27&width=118">是着色点(微分面积元)内所有法向为<img src="/assets/post_images/Cook-Torrance-BRDF/image_093.svg#from=paste&height=20&id=u615464fa&margin=%5Bobject%20Object%5D&originHeight=20&originWidth=12&originalType=url&status=done&style=none&taskId=ua7d087f1-79b6-4571-a769-5dabddc3d0a&width=12">的微平面的面积，乘上<img src="/assets/post_images/Cook-Torrance-BRDF/image_094.svg#from=paste&height=20&id=u1acef715&margin=%5Bobject%20Object%5D&originHeight=20&originWidth=39&originalType=url&status=done&style=none&taskId=u7a681052-22b0-4487-8043-0195a387a18&width=39">则代表将其投影至宏观平面上，将所有的法线方向<img src="/assets/post_images/Cook-Torrance-BRDF/image_095.svg#from=paste&height=18&id=ue5951763&margin=%5Bobject%20Object%5D&originHeight=18&originWidth=24&originalType=url&status=done&style=none&taskId=u6360e1a9-024f-4918-8f77-039d5c49ce8&width=24">的投影面积都加起来，自然还是原来的微分面积元<img src="/assets/post_images/Cook-Torrance-BRDF/image_096.svg#from=paste&height=20&id=ubd58d936&margin=%5Bobject%20Object%5D&originHeight=20&originWidth=27&originalType=url&status=done&style=none&taskId=u011ae27d-852d-47cb-baf0-dce8aad8e5b&width=27">保持不变，同时将上式子进一步化简可得：<br /><img src="/assets/post_images/Cook-Torrance-BRDF/image_097.svg#from=paste&height=60&id=uecffb03b&margin=%5Bobject%20Object%5D&originHeight=60&originWidth=675&originalType=url&status=done&style=none&taskId=u057845c6-52c1-4a2e-ad9a-26e5d5947e6&width=675"><br />可以验证一下广泛使用的GGX (Trowbridge-Reitz)法线分布函数：<br /><img src="/assets/post_images/Cook-Torrance-BRDF/image_098.svg#from=paste&height=48&id=ub06d7f99&margin=%5Bobject%20Object%5D&originHeight=48&originWidth=675&originalType=url&status=done&style=none&taskId=ua22216fe-8b04-4bb0-915d-08707bad808&width=675"><img src="/assets/post_images/Cook-Torrance-BRDF/image_099.svg#from=paste&height=89&id=u8356b9cd&margin=%5Bobject%20Object%5D&originHeight=89&originWidth=675&originalType=url&status=done&style=none&taskId=ud5a25518-8c35-49a3-8bc5-cc16c02754d&width=675"><br />验证如下：<br /><img src="/assets/post_images/Cook-Torrance-BRDF/image_100.svg#from=paste&height=368&id=uce17af15&margin=%5Bobject%20Object%5D&originHeight=368&originWidth=675&originalType=url&status=done&style=none&taskId=u3514e698-2ce4-435e-a212-5e57255ebc0&width=675"><br><a name="gkvzQ"></a></p>
<h2 id="3-3-菲涅尔方程与几何函数的补充"><a href="#3-3-菲涅尔方程与几何函数的补充" class="headerlink" title="3.3 菲涅尔方程与几何函数的补充"></a><strong>3.3 菲涅尔方程与几何函数的补充</strong></h2><p>最后再简略的讲一下菲尼尔方程和几何函数对光线损失的影响吧。<br><a name="r41wW"></a></p>
<h3 id="3-3-1-菲涅尔方程"><a href="#3-3-1-菲涅尔方程" class="headerlink" title="3.3.1 菲涅尔方程"></a><strong>3.3.1 菲涅尔方程</strong></h3><p>菲涅尔方程是为了描述物理世界当中，观察角度与法线夹角越大反射程度一般越大的一种情形，但是精确计算计算消耗较大，一般用Fresnel-Schlick近似法求得近似解<br /><img src="/assets/post_images/Cook-Torrance-BRDF/image_101.svg#from=paste&height=48&id=u275cb674&margin=%5Bobject%20Object%5D&originHeight=48&originWidth=675&originalType=url&status=done&style=none&taskId=ud759bc36-6036-4e76-9af2-4e9bac93a26&width=675"><br /><img src="/assets/post_images/Cook-Torrance-BRDF/image_102.svg#from=paste&height=23&id=u8579b998&margin=%5Bobject%20Object%5D&originHeight=23&originWidth=23&originalType=url&status=done&style=none&taskId=ue8f29765-0b17-42bc-bb62-cde582239a2&width=23">表示平面的基础反射率，它是利用所谓折射系数(Indices of Refraction)计算得出的。越是朝球面掠角的方向上看（此时视线和表面法线的夹角接近90度）菲涅尔现象就越明显，反光就越强。但是根据折射系数只能算出电介质(非导体)的<img src="/assets/post_images/Cook-Torrance-BRDF/image_103.svg#from=paste&height=23&id=u72772f63&margin=%5Bobject%20Object%5D&originHeight=23&originWidth=23&originalType=url&status=done&style=none&taskId=u784ed1e0-5eb8-4610-aca1-03ff619ff5b&width=23">为了兼容导体，一般会将<img src="/assets/post_images/Cook-Torrance-BRDF/image_104.svg#from=paste&height=23&id=u5acc1d0a&margin=%5Bobject%20Object%5D&originHeight=23&originWidth=23&originalType=url&status=done&style=none&taskId=u6620d40a-ef01-47ad-b74c-757aad02b69&width=23">提前计算出来，再代入方程：<br /><img src="/assets/post_images/Cook-Torrance-BRDF/image_105.jpg#from=paste&height=453&id=u1729e6a7&margin=%5Bobject%20Object%5D&originHeight=453&originWidth=1091&originalType=url&status=done&style=none&taskId=ucae89221-e43f-4596-9e5b-b7fe284a510&width=1091"><br />关于菲涅尔方程的详细介绍，我在光线追踪笔记中的4.2，4.3节中由详细提及，这里就不再重复了。<br /><strong><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/144403005">https://zhuanlan.zhihu.com/p/144403005</a></strong>zhuanlan.zhihu.com<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/144403005"><img src="/assets/post_images/Cook-Torrance-BRDF/image_106.svg#from=paste&height=120&id=u10d144eb&margin=%5Bobject%20Object%5D&originHeight=120&originWidth=120&originalType=url&status=done&style=none&taskId=ue6c2f4f7-d14b-4420-aee1-4f0fadbc002&width=120"></a><br><a name="N6ZZQ"></a></p>
<h3 id="3-3-2几何函数"><a href="#3-3-2几何函数" class="headerlink" title="3.3.2几何函数"></a><strong>3.3.2几何函数</strong></h3><p>几何函数G是为了表示微平面的自遮挡从而引起的光线损失，一般会出现如下两种的遮挡情况<br /><img src="/assets/post_images/Cook-Torrance-BRDF/image_107.jpg#from=paste&height=284&id=u5ff07eb7&margin=%5Bobject%20Object%5D&originHeight=284&originWidth=847&originalType=url&status=done&style=none&taskId=u2a6eea68-581f-498a-8102-1285d0e3952&width=847"><br />左边一幅图中是入射光线无法照射到一些微平面，这种情况称为Shadowing，右边图中是反射光线无法正常到达人眼，称为Masking，而几何函数<img src="/assets/post_images/Cook-Torrance-BRDF/image_108.svg#from=paste&height=20&id=uf6173422&margin=%5Bobject%20Object%5D&originHeight=20&originWidth=16&originalType=url&status=done&style=none&taskId=u0f7c22d7-f9d1-456a-9a93-aa7844dffe4&width=16">正是为了模拟出这两种情况所导致的光线所示，在UE4中采用了Schlick-GGX来进行建模：<br /><img src="/assets/post_images/Cook-Torrance-BRDF/image_109.svg#from=paste&height=63&id=u17a7291e&margin=%5Bobject%20Object%5D&originHeight=63&originWidth=675&originalType=url&status=done&style=none&taskId=u2e79dc45-a861-4682-b63a-fa63cc2a409&width=675"><img src="/assets/post_images/Cook-Torrance-BRDF/image_110.svg#from=paste&height=59&id=u7c33c5be&margin=%5Bobject%20Object%5D&originHeight=59&originWidth=675&originalType=url&status=done&style=none&taskId=u34f1f161-fd92-4ad3-b6c1-f2263a7be7a&width=675"><img src="/assets/post_images/Cook-Torrance-BRDF/image_111.svg#from=paste&height=45&id=uf3287aaa&margin=%5Bobject%20Object%5D&originHeight=45&originWidth=675&originalType=url&status=done&style=none&taskId=u497cf7b4-1d82-4084-8d2b-f9acf7fc0fb&width=675"><br />(一般来说表面粗糙程度Roughness越大，遮挡程度越大)</p>

    </article>
    <!-- license -->
        <div class="license-wrapper">
            <p>Author：<a href="https://graphicyan.github.io">Yan Zhang</a>
            <p>Link：<a href="https://graphicyan.github.io/2021/04/02/Cook-Torrance-BRDF/">https://graphicyan.github.io/2021/04/02/Cook-Torrance-BRDF/</a>
            <p>Publish date：<a href="https://graphicyan.github.io/2021/04/02/Cook-Torrance-BRDF/">April 2nd 2021, 3:23:25 pm</a>
            <p>Update date：<a href="https://graphicyan.github.io/2021/04/02/Cook-Torrance-BRDF/">July 20th 2025, 10:18:39 pm</a>
            <p>License：本文采用<a rel="license noopener" target="_blank" href="http://creativecommons.org/licenses/by-nc/4.0/">知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可</p>
        </div>
    <!-- paginator -->
    <ul class="post-paginator">
        <li class="next">
                <div class="nextSlogan">Next Post</div>
                <a href="/2021/04/09/Monte-Carlo-Path-Tracing/" title="蒙特卡洛路径追踪">
                    <div class="nextTitle">蒙特卡洛路径追踪</div>
                </a>
        </li>
        <li class="previous">
                <div class="prevSlogan">Previous Post</div>
                <a href="/2021/03/29/Learn-Rendering-Function/" title="理解渲染方程">
                    <div class="prevTitle">理解渲染方程</div>
                </a>
        </li>
    </ul>
    <!-- comment -->
        <div class="post-comment">
            <!-- 来必力 City 版安装代码 -->

            
            
            
            <!-- utteranc评论 -->

            <!-- partial('_partial/comment/changyan') -->
            <!--PC版-->

            
            
            
        </div>
    <!-- timeliness note -->
    <!-- idea from: https://hexo.fluid-dev.com/posts/hexo-injector/#%E6%96%87%E7%AB%A0%E6%97%B6%E6%95%88%E6%80%A7%E6%8F%90%E7%A4%BA -->
    <!-- Mathjax -->
</main>

                <!-- profile -->
            </div>
            <footer class="footer footer-unloaded">
    <!-- social  -->
        <div class="social">
                            <a href="mailto:yanzhang.cg@gmail.com" class="iconfont-archer email" title="email" ></a>
                <a href="https://github.com/GraphicYan" class="iconfont-archer github" target="_blank" title="github"></a>
                <span class="iconfont-archer wechat" title="wechat">
                    <img class="profile-qr" src="/images/wechat.jpg" />
                </span>

        </div>
    <!-- powered by Hexo  -->
    <div class="copyright">
        <span id="hexo-power">Powered by <a href="https://hexo.io/" target="_blank">Hexo</a></span><span class="iconfont-archer power">&#xe635;</span><span id="theme-info">theme <a href="https://github.com/fi3ework/hexo-theme-archer" target="_blank">Archer</a></span>
    </div>
    <!-- website approve for Chinese user -->
    <!-- 不蒜子  -->
        <div class="busuanzi-container">
                <span id="busuanzi_container_site_pv">PV: <span id="busuanzi_value_site_pv"></span> :)</span>
        </div>
</footer>

        </div>
        <!-- toc -->
            <div class="toc-wrapper toc-wrapper-loding" style=    top:50vh;
>
                <div class="toc-catalog">
                    <span class="iconfont-archer catalog-icon">&#xe613;</span><span>CATALOG</span>
                </div>
                <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-%E6%BC%AB%E5%8F%8D%E5%B0%84%E9%A1%B9%E6%8E%A8%E5%AF%BC"><span class="toc-number">1.</span> <span class="toc-text">3.1 漫反射项推导</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-%E9%95%9C%E9%9D%A2%E5%8F%8D%E5%B0%84%E9%A1%B9%E6%8E%A8%E5%AF%BC"><span class="toc-number">2.</span> <span class="toc-text">3.2 镜面反射项推导</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-%E8%8F%B2%E6%B6%85%E5%B0%94%E6%96%B9%E7%A8%8B%E4%B8%8E%E5%87%A0%E4%BD%95%E5%87%BD%E6%95%B0%E7%9A%84%E8%A1%A5%E5%85%85"><span class="toc-number">3.</span> <span class="toc-text">3.3 菲涅尔方程与几何函数的补充</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-1-%E8%8F%B2%E6%B6%85%E5%B0%94%E6%96%B9%E7%A8%8B"><span class="toc-number">3.1.</span> <span class="toc-text">3.3.1 菲涅尔方程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-2%E5%87%A0%E4%BD%95%E5%87%BD%E6%95%B0"><span class="toc-number">3.2.</span> <span class="toc-text">3.3.2几何函数</span></a></li></ol></li></ol>
            </div>
        <!-- sidebar -->
        <div class="sidebar sidebar-hide">
    <ul class="sidebar-tabs sidebar-tabs-active-0">
        <li class="sidebar-tab-archives"><span class="iconfont-archer">&#xe67d;</span><span class="tab-name">Archive</span></li>
        <li class="sidebar-tab-tags"><span class="iconfont-archer">&#xe61b;</span><span class="tab-name">Tag</span></li>
        <li class="sidebar-tab-categories"><span class="iconfont-archer">&#xe666;</span><span class="tab-name">Cate</span></li>
    </ul>
    <div class="sidebar-content sidebar-content-show-archive">
        <div class="sidebar-panel-archives">
    <!-- 在 ejs 中将 archive 按照时间排序 -->
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
    <div class="total-and-search">
        <div class="total-archive">
        Total : 22
        </div>
        <!-- search  -->
    </div>
    <div class="post-archive">
            <div class="archive-year"> 2025 </div>
            <ul class="year-list">
        <li class="archive-post-item">
            <span class="archive-post-date">03/28</span>
            <a class="archive-post-title" href="/2025/03/28/ViT-Development/">视觉Transformer发展简史：从ViT到DINOv2的技术演进</a>
        </li>
                </ul>
            <div class="archive-year"> 2024 </div>
            <ul class="year-list">
        <li class="archive-post-item">
            <span class="archive-post-date">11/23</span>
            <a class="archive-post-title" href="/2024/11/23/Transformer-Based-Add-Hand/">基于Transformer的人体姿态重建（四）：引入高精度的手部姿态</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">10/05</span>
            <a class="archive-post-title" href="/2024/10/05/Transformer-Based-HPE-SOTA/">基于Transformer的人体姿态重建（三）：几种SOTA工作的详细解析与未来展望</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">08/09</span>
            <a class="archive-post-title" href="/2024/08/09/Transformer-Based-HPE-Template/">基于Transformer的人体姿态重建（二）：实现模板</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">07/04</span>
            <a class="archive-post-title" href="/2024/07/04/Transformer-Based-HMR/">基于Transformer的人体姿态重建：技术实践与原理详解</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">03/08</span>
            <a class="archive-post-title" href="/2024/03/08/ViT/">Vision Transformer (ViT) 详细技术文档</a>
        </li>
                </ul>
            <div class="archive-year"> 2023 </div>
            <ul class="year-list">
        <li class="archive-post-item">
            <span class="archive-post-date">12/15</span>
            <a class="archive-post-title" href="/2023/12/15/Dcc-Coords/">一图对比众3D引擎的坐标系</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">07/08</span>
            <a class="archive-post-title" href="/2023/07/08/ML-Deformer/">基于机器学习的物理变形器</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">07/02</span>
            <a class="archive-post-title" href="/2023/07/02/Dynamic-Bones/">基于动力学的骨骼动画技术综述</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">06/04</span>
            <a class="archive-post-title" href="/2023/06/04/Simulation-Dynamics-Engine/">仿真及动力学系统综述</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">05/21</span>
            <a class="archive-post-title" href="/2023/05/21/Build-WebRTC-For-MSVC/">编译可以在MSVC中使用的WebRTC库</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">02/21</span>
            <a class="archive-post-title" href="/2023/02/21/Collaborative-Engine/">浅谈端云协同渲染</a>
        </li>
                </ul>
            <div class="archive-year"> 2022 </div>
            <ul class="year-list">
        <li class="archive-post-item">
            <span class="archive-post-date">12/29</span>
            <a class="archive-post-title" href="/2022/12/29/Mixed-Virtual-Production/">混合虚拟制片</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">10/08</span>
            <a class="archive-post-title" href="/2022/10/08/C2BP-Params/">C++生成蓝图的参数类型记录</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">06/29</span>
            <a class="archive-post-title" href="/2022/06/29/Schlick-Approximate/">Schilick的近似方法</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">03/18</span>
            <a class="archive-post-title" href="/2022/03/18/Illumination/">光通量、光强和照度</a>
        </li>
                </ul>
            <div class="archive-year"> 2021 </div>
            <ul class="year-list">
        <li class="archive-post-item">
            <span class="archive-post-date">12/13</span>
            <a class="archive-post-title" href="/2021/12/13/DS-VS-DL/">延迟渲染Vs延迟光照</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">04/17</span>
            <a class="archive-post-title" href="/2021/04/17/Importance-Sampling/">重要性采样</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">04/09</span>
            <a class="archive-post-title" href="/2021/04/09/Monte-Carlo-Path-Tracing/">蒙特卡洛路径追踪</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">04/02</span>
            <a class="archive-post-title" href="/2021/04/02/Cook-Torrance-BRDF/">Cook-Torrance的BRDF</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">03/29</span>
            <a class="archive-post-title" href="/2021/03/29/Learn-Rendering-Function/">理解渲染方程</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">03/22</span>
            <a class="archive-post-title" href="/2021/03/22/Learn-Radiometry/">辐射度量学笔记</a>
        </li>
            </ul>
    </div>
</div>

        <div class="sidebar-panel-tags">
    <div class="sidebar-tags-name">
            <span class="sidebar-tag-name" data-tags="UE">
                <span class="iconfont-archer">&#xe606;</span>
                UE
            </span>
            <span class="sidebar-tag-name" data-tags="Rendering">
                <span class="iconfont-archer">&#xe606;</span>
                Rendering
            </span>
            <span class="sidebar-tag-name" data-tags="3D Engine">
                <span class="iconfont-archer">&#xe606;</span>
                3D Engine
            </span>
            <span class="sidebar-tag-name" data-tags="Animations">
                <span class="iconfont-archer">&#xe606;</span>
                Animations
            </span>
            <span class="sidebar-tag-name" data-tags="Simulation">
                <span class="iconfont-archer">&#xe606;</span>
                Simulation
            </span>
            <span class="sidebar-tag-name" data-tags="AI">
                <span class="iconfont-archer">&#xe606;</span>
                AI
            </span>
    </div>
    <div class="iconfont-archer sidebar-tags-empty">&#xe678;</div>
    <div class="tag-load-fail" style="display: none; color: #ccc; font-size: 0.6rem;">
        缺失模块，请参考主题文档进行安装配置：https://github.com/fi3ework/hexo-theme-archer#%E5%AE%89%E8%A3%85%E4%B8%BB%E9%A2%98
    </div> 
    <div class="sidebar-tags-list"></div>
</div>

        <div class="sidebar-panel-categories">
    <div class="sidebar-categories-name">
    </div>
    <div class="iconfont-archer sidebar-categories-empty">&#xe678;</div>
    <div class="sidebar-categories-list"></div>
</div>

    </div>
</div>

        <!-- site-meta -->
        <script>
    var siteMetaRoot = "/"
    if (siteMetaRoot === "undefined") {
        siteMetaRoot = '/'
    }
    var siteMeta = {
        url: "https://graphicyan.github.io",
        root: siteMetaRoot,
        author: "Yan Zhang"
    }
</script>

        <!-- import experimental options here -->
        <!-- Custom Font -->

        <!-- main func -->
        <script src="/scripts/main.js"></script>
        <!-- fancybox -->
        <script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.36/dist/fancybox/fancybox.umd.js" onload="window.Fancybox.bind('[data-fancybox]')" defer></script>
        <!-- algolia -->
        <!-- busuanzi -->
            <script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>
        <!-- async load share.js -->
            <script src="/scripts/share.js" async></script>
        <!-- mermaid -->
    </body>
</html>
